<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventas Pro | Demo Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary: #4F46E5;
            --primary-dark: #4338CA;
            --primary-light: #818CF8;
            --secondary: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
            --dark: #1F2937;
            --light: #F9FAFB;
            --sidebar-width: 260px;
            --header-height: 70px;
            --radius: 8px;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: #F8FAFC;
            color: var(--dark);
            overflow-x: hidden;
        }

        /* Demo Banner */
        .demo-banner {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            position: relative;
            z-index: 101;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .demo-banner .badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--dark) 0%, #1a1a2e 100%);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            font-size: 22px;
            font-weight: 700;
            text-decoration: none;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-section {
            padding: 24px 0;
        }

        .nav-title {
            padding: 0 24px 12px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 4px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 24px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            position: relative;
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }

        .nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--primary);
            border-radius: 0 4px 4px 0;
        }

        .nav-icon {
            width: 20px;
            text-align: center;
            font-size: 18px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            width: calc(100% - var(--sidebar-width));
        }

        /* Top Header */
        .top-header {
            height: var(--header-height);
            background: white;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            position: sticky;
            top: 0;
            z-index: 90;
            box-shadow: var(--shadow);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
        }

        .demo-tag {
            background: var(--primary-light);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .user-menu:hover {
            background: var(--gray-100);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Content Area */
        .content-wrapper {
            padding: 30px;
        }

        /* Welcome Demo Section */
        .demo-welcome {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px;
            border-radius: var(--radius);
            margin-bottom: 30px;
            text-align: center;
        }

        .demo-welcome h2 {
            font-size: 32px;
            margin-bottom: 16px;
        }

        .demo-welcome p {
            font-size: 16px;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto 24px;
        }

        .demo-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-title {
            font-size: 14px;
            color: var(--gray-600);
            font-weight: 500;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 500;
        }

        .positive {
            color: var(--secondary);
        }

        .negative {
            color: var(--danger);
        }

        /* Charts */
        .chart-container {
            background: white;
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .chart-wrapper {
            height: 300px;
            position: relative;
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .table-header {
            padding: 24px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .btn {
            padding: 10px 20px;
            border-radius: var(--radius);
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.2);
        }

        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-50);
        }

        .btn-demo {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-demo:hover {
            background: var(--primary);
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--gray-50);
        }

        th {
            padding: 16px 24px;
            text-align: left;
            font-weight: 600;
            color: var(--gray-700);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--gray-200);
        }

        td {
            padding: 20px 24px;
            border-bottom: 1px solid var(--gray-200);
            font-size: 14px;
        }

        tbody tr {
            transition: var(--transition);
        }

        tbody tr:hover {
            background: var(--gray-50);
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .status-success {
            background: #D1FAE5;
            color: #065F46;
        }

        .status-warning {
            background: #FEF3C7;
            color: #92400E;
        }

        .status-danger {
            background: #FEE2E2;
            color: #991B1B;
        }

        .status-info {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gray-100);
            color: var(--gray-700);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-icon:hover {
            background: var(--gray-200);
        }

        /* Demo Cards */
        .demo-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .feature-card {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 30px;
            color: white;
        }

        .feature-card h3 {
            font-size: 20px;
            margin-bottom: 12px;
            color: var(--dark);
        }

        .feature-card p {
            color: var(--gray-600);
            line-height: 1.6;
        }

        /* Quick Stats */
        .quick-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .quick-stat {
            flex: 1;
            min-width: 200px;
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quick-stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .quick-stat-content h4 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .quick-stat-content p {
            font-size: 14px;
            color: var(--gray-600);
        }

        /* Demo Instructions */
        .demo-instructions {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
            border-left: 4px solid var(--primary);
        }

        .demo-instructions h3 {
            font-size: 20px;
            margin-bottom: 16px;
            color: var(--dark);
        }

        .demo-instructions ul {
            list-style: none;
            margin-left: 0;
        }

        .demo-instructions li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-instructions li i {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .content-wrapper {
                padding: 20px;
            }
            
            .demo-welcome {
                padding: 30px 20px;
            }
            
            .demo-welcome h2 {
                font-size: 24px;
            }
            
            .table-header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
            
            .demo-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: var(--radius);
            background: white;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1100;
            transform: translateX(120%);
            transition: transform 0.3s ease;
        }

        .notification.active {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--secondary);
        }

        .notification.info {
            border-left: 4px solid var(--primary);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray-500);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            color: var(--gray-300);
        }

        /* Demo Footer */
        .demo-footer {
            text-align: center;
            padding: 30px;
            color: var(--gray-600);
            font-size: 14px;
            border-top: 1px solid var(--gray-200);
            margin-top: 30px;
        }

        .demo-footer a {
            color: var(--primary);
            text-decoration: none;
        }

        .demo-footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Demo Banner -->
    <div class="demo-banner">
        <i class="fas fa-star"></i>
        <span>SISTEMA DEMO COMPLETO - Datos pre-cargados para pruebas</span>
        <span class="badge">VERSI√ìN DEMO</span>
    </div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    Ventas Pro
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">Navegaci√≥n Principal</div>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="dashboard">
                            <i class="fas fa-tachometer-alt nav-icon"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="sales">
                            <i class="fas fa-shopping-cart nav-icon"></i>
                            Ventas
                            <span class="nav-badge" id="salesBadge">12</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="customers">
                            <i class="fas fa-users nav-icon"></i>
                            Clientes
                            <span class="nav-badge" id="customersBadge">8</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="products">
                            <i class="fas fa-box nav-icon"></i>
                            Productos
                            <span class="nav-badge" id="productsBadge">6</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="leads">
                            <i class="fas fa-bullseye nav-icon"></i>
                            Leads
                            <span class="nav-badge" id="leadsBadge">15</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">Funciones Demo</div>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="reports">
                            <i class="fas fa-chart-bar nav-icon"></i>
                            Reportes PDF
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="analytics">
                            <i class="fas fa-chart-pie nav-icon"></i>
                            Gr√°ficos
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" onclick="resetDemoData()">
                            <i class="fas fa-redo nav-icon"></i>
                            Reset Demo
                        </a>
                    </li>
                </ul>
            </div>

            <div class="nav-section">
                <div class="nav-title">Informaci√≥n</div>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#" class="nav-link" onclick="showDemoInstructions()">
                            <i class="fas fa-info-circle nav-icon"></i>
                            C√≥mo usar el Demo
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" onclick="exportAllData()">
                            <i class="fas fa-download nav-icon"></i>
                            Exportar Datos
                        </a>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <button class="btn-icon mobile-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Dashboard Demo</h1>
                    <span class="demo-tag">SISTEMA COMPLETO</span>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-secondary" onclick="addDemoData()">
                        <i class="fas fa-plus"></i>
                        Agregar Datos Demo
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar">DM</div>
                        <div>
                            <div class="user-name">Usuario Demo</div>
                            <div class="user-role">Administrador</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-wrapper">
                <!-- Dashboard Page -->
                <div class="page active" id="dashboard">
                    <!-- Welcome Section -->
                    <div class="demo-welcome">
                        <h2>‚ú® Bienvenido al Sistema de Ventas Pro - DEMO</h2>
                        <p>Este es un sistema completamente funcional con datos de demostraci√≥n pre-cargados. Explore todas las funciones, cree nuevos registros, genere reportes PDF y vea gr√°ficos en tiempo real.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="addDemoData()">
                                <i class="fas fa-database"></i>
                                Cargar M√°s Datos Demo
                            </button>
                            <button class="btn btn-secondary" onclick="showDemoInstructions()">
                                <i class="fas fa-question-circle"></i>
                                C√≥mo usar el Demo
                            </button>
                            <button class="btn btn-demo" onclick="testAllFeatures()">
                                <i class="fas fa-play"></i>
                                Probar Todas las Funciones
                            </button>
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="demo-instructions">
                        <h3>üöÄ Caracter√≠sticas del Sistema DEMO:</h3>
                        <ul>
                            <li><i class="fas fa-check-circle"></i> <strong>CRUD Completo:</strong> Crear, Leer, Actualizar y Eliminar registros</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Gr√°ficos en Tiempo Real:</strong> Se actualizan autom√°ticamente</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Exportaci√≥n PDF:</strong> Genera reportes profesionales</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Datos Persistente:</strong> Se guardan en tu navegador</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Responsive Design:</strong> Funciona en m√≥viles y desktop</li>
                        </ul>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="quickSales">0</h4>
                                <p>Ventas Totales</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--secondary) 0%, #34D399 100%);">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="quickCustomers">0</h4>
                                <p>Clientes Activos</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--info) 0%, #60A5FA 100%);">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="quickLeads">0</h4>
                                <p>Leads en Proceso</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--warning) 0%, #FBBF24 100%);">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="quickRevenue">$0</h4>
                                <p>Ingresos Totales</p>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Ingresos del Mes</div>
                                    <div class="stat-value">$<span id="monthRevenue">0</span></div>
                                </div>
                                <div class="stat-icon" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                            </div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>15.2% vs mes anterior</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Nuevos Clientes</div>
                                    <div class="stat-value" id="newCustomers">0</div>
                                </div>
                                <div class="stat-icon" style="background: linear-gradient(135deg, var(--secondary) 0%, #34D399 100%);">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                            </div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>8.3% vs mes anterior</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Tasa de Conversi√≥n</div>
                                    <div class="stat-value" id="conversionRate">0%</div>
                                </div>
                                <div class="stat-icon" style="background: linear-gradient(135deg, var(--info) 0%, #60A5FA 100%);">
                                    <i class="fas fa-percentage"></i>
                                </div>
                            </div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>5.1% vs mes anterior</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <div class="stat-title">Productos Vendidos</div>
                                    <div class="stat-value" id="productsSold">0</div>
                                </div>
                                <div class="stat-icon" style="background: linear-gradient(135deg, var(--warning) 0%, #FBBF24 100%);">
                                    <i class="fas fa-box"></i>
                                </div>
                            </div>
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>12.5% vs mes anterior</span>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="chart-container">
                        <div class="chart-header">
                            <h2 class="chart-title">üìà Ventas Mensuales (Demo)</h2>
                            <div>
                                <button class="btn btn-secondary" onclick="exportChart('salesChart', 'Ventas_Mensuales.pdf')">
                                    <i class="fas fa-download"></i>
                                    Exportar PDF
                                </button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>

                    <!-- Features Cards -->
                    <div class="demo-features">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3>Gr√°ficos en Tiempo Real</h3>
                            <p>Visualiza tus datos con gr√°ficos interactivos que se actualizan autom√°ticamente cuando agregas o modificas informaci√≥n.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h3>Exportaci√≥n PDF</h3>
                            <p>Genera reportes profesionales en PDF de ventas, clientes, productos y leads con un solo clic.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <h3>Datos Persistentes</h3>
                            <p>Todos los datos se guardan autom√°ticamente en tu navegador. Puedes exportar e importar cuando quieras.</p>
                        </div>
                    </div>

                    <!-- Recent Sales Table -->
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">üõí Ventas Recientes (Demo)</h2>
                            <div class="table-actions">
                                <button class="btn btn-secondary" onclick="exportTable('sales', 'Ventas_Demo.pdf')">
                                    <i class="fas fa-download"></i>
                                    Exportar PDF
                                </button>
                                <button class="btn btn-primary" onclick="addRandomSale()">
                                    <i class="fas fa-plus"></i>
                                    Nueva Venta Demo
                                </button>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Cliente</th>
                                        <th>Producto</th>
                                        <th>Monto</th>
                                        <th>Estado</th>
                                        <th>Fecha</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="recentSalesTable">
                                    <tr>
                                        <td colspan="6" class="empty-state">
                                            <i class="fas fa-shopping-cart"></i>
                                            <div>Cargando datos de demostraci√≥n...</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Sales Page -->
                <div class="page" id="sales">
                    <div class="demo-welcome" style="background: linear-gradient(135deg, var(--secondary) 0%, #0D966C 100%);">
                        <h2>üì¶ Gesti√≥n de Ventas - DEMO</h2>
                        <p>Gestiona todas tus ventas. Crea nuevas ventas, actualiza estados, genera recibos PDF y exporta reportes completos.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="openModal('saleModal')">
                                <i class="fas fa-plus"></i>
                                Crear Venta Demo
                            </button>
                            <button class="btn btn-secondary" onclick="exportTable('sales', 'Reporte_Ventas.pdf')">
                                <i class="fas fa-file-pdf"></i>
                                Exportar Todas las Ventas
                            </button>
                            <button class="btn btn-demo" onclick="generateDemoReceipt()">
                                <i class="fas fa-receipt"></i>
                                Generar Recibo Demo
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">Todas las Ventas (Demo)</h2>
                            <div class="table-actions">
                                <button class="btn btn-secondary" onclick="filterSales('Completada')">
                                    <i class="fas fa-filter"></i>
                                    Ver Completadas
                                </button>
                                <button class="btn btn-primary" onclick="openModal('saleModal')">
                                    <i class="fas fa-plus"></i>
                                    Nueva Venta
                                </button>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Cliente</th>
                                        <th>Producto</th>
                                        <th>Monto</th>
                                        <th>Estado</th>
                                        <th>Fecha</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="salesTable">
                                    <!-- Data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Customers Page -->
                <div class="page" id="customers">
                    <div class="demo-welcome" style="background: linear-gradient(135deg, var(--info) 0%, #2563EB 100%);">
                        <h2>üë• Gesti√≥n de Clientes - DEMO</h2>
                        <p>Administra tu base de clientes. Agrega nuevos clientes, actualiza informaci√≥n y visualiza su historial de compras.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="openModal('customerModal')">
                                <i class="fas fa-user-plus"></i>
                                Nuevo Cliente Demo
                            </button>
                            <button class="btn btn-secondary" onclick="exportTable('customers', 'Reporte_Clientes.pdf')">
                                <i class="fas fa-file-pdf"></i>
                                Exportar Clientes
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">Clientes Registrados (Demo)</h2>
                            <button class="btn btn-primary" onclick="openModal('customerModal')">
                                <i class="fas fa-plus"></i>
                                Nuevo Cliente
                            </button>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Tel√©fono</th>
                                        <th>Estado</th>
                                        <th>Total Compras</th>
                                        <th>√öltima Compra</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTable">
                                    <!-- Data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Products Page -->
                <div class="page" id="products">
                    <div class="demo-welcome" style="background: linear-gradient(135deg, var(--warning) 0%, #D97706 100%);">
                        <h2>üì¶ Cat√°logo de Productos - DEMO</h2>
                        <p>Gestiona tu inventario de productos. Agrega nuevos productos, actualiza precios, stock y categor√≠as.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="openModal('productModal')">
                                <i class="fas fa-box"></i>
                                Nuevo Producto Demo
                            </button>
                            <button class="btn btn-secondary" onclick="exportTable('products', 'Catalogo_Productos.pdf')">
                                <i class="fas fa-file-pdf"></i>
                                Exportar Cat√°logo
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">Productos Disponibles (Demo)</h2>
                            <button class="btn btn-primary" onclick="openModal('productModal')">
                                <i class="fas fa-plus"></i>
                                Nuevo Producto
                            </button>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Categor√≠a</th>
                                        <th>Precio</th>
                                        <th>Stock</th>
                                        <th>Estado</th>
                                        <th>Ventas</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTable">
                                    <!-- Data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Leads Page -->
                <div class="page" id="leads">
                    <div class="demo-welcome" style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);">
                        <h2>üéØ Pipeline de Leads - DEMO</h2>
                        <p>Seguimiento completo de leads. Convierte leads en clientes, filtra por estado y valora oportunidades.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="openModal('leadModal')">
                                <i class="fas fa-bullseye"></i>
                                Nuevo Lead Demo
                            </button>
                            <button class="btn btn-secondary" onclick="exportTable('leads', 'Pipeline_Leads.pdf')">
                                <i class="fas fa-file-pdf"></i>
                                Exportar Leads
                            </button>
                            <button class="btn btn-demo" onclick="convertRandomLead()">
                                <i class="fas fa-user-plus"></i>
                                Convertir Lead Demo
                            </button>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">Leads en Proceso (Demo)</h2>
                            <button class="btn btn-primary" onclick="openModal('leadModal')">
                                <i class="fas fa-plus"></i>
                                Nuevo Lead
                            </button>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Empresa</th>
                                        <th>Estado</th>
                                        <th>Valor Estimado</th>
                                        <th>Fuente</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="leadsTable">
                                    <!-- Data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div class="page" id="reports">
                    <div class="demo-welcome" style="background: linear-gradient(135deg, #EC4899 0%, #DB2777 100%);">
                        <h2>üìä Reportes y An√°lisis - DEMO</h2>
                        <p>Genera reportes profesionales en PDF, exporta datos y visualiza an√°lisis completos de tu negocio.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="generateSalesReport()">
                                <i class="fas fa-file-pdf"></i>
                                Reporte de Ventas PDF
                            </button>
                            <button class="btn btn-secondary" onclick="exportAllData()">
                                <i class="fas fa-database"></i>
                                Exportar Todos los Datos
                            </button>
                            <button class="btn btn-demo" onclick="testAllExports()">
                                <i class="fas fa-play"></i>
                                Probar Todas las Exportaciones
                            </button>
                        </div>
                    </div>

                    <div class="demo-features">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <h3>Reporte de Ventas</h3>
                            <p>Genera un reporte completo de ventas con gr√°ficos, estad√≠sticas y an√°lisis detallado.</p>
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="generateSalesReport()">
                                Generar PDF
                            </button>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3>Reporte de Clientes</h3>
                            <p>Exporta la lista completa de clientes con su historial de compras y datos de contacto.</p>
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="exportTable('customers', 'Reporte_Clientes.pdf')">
                                Exportar PDF
                            </button>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <h3>Cat√°logo de Productos</h3>
                            <p>Genera un cat√°logo profesional de productos con precios, stock y categor√≠as.</p>
                            <button class="btn btn-primary" style="margin-top: 15px;" onclick="exportTable('products', 'Catalogo_Productos.pdf')">
                                Exportar PDF
                            </button>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h2 class="chart-title">üìà Ventas por Categor√≠a (Demo)</h2>
                            <button class="btn btn-secondary" onclick="exportChart('categoryChart', 'Ventas_Categoria.pdf')">
                                <i class="fas fa-download"></i>
                                Exportar Gr√°fico
                            </button>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Analytics Page -->
                <div class="page" id="analytics">
                    <div class="demo-welcome" style="background: linear-gradient(135deg, #06B6D4 0%, #0891B2 100%);">
                        <h2>üìà An√°lisis y Gr√°ficos - DEMO</h2>
                        <p>Visualiza tus datos con gr√°ficos interactivos en tiempo real. Analiza tendencias y m√©tricas clave.</p>
                        <div class="demo-actions">
                            <button class="btn btn-primary" onclick="updateAllCharts()">
                                <i class="fas fa-sync-alt"></i>
                                Actualizar Gr√°ficos
                            </button>
                            <button class="btn btn-secondary" onclick="exportAllCharts()">
                                <i class="fas fa-download"></i>
                                Exportar Todos los Gr√°ficos
                            </button>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h2 class="chart-title">üìä Distribuci√≥n de Ventas</h2>
                            <button class="btn btn-secondary" onclick="exportChart('distributionChart', 'Distribucion_Ventas.pdf')">
                                <i class="fas fa-download"></i>
                                Exportar PDF
                            </button>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="distributionChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h2 class="chart-title">üìà Tendencias Mensuales</h2>
                            <button class="btn btn-secondary" onclick="exportChart('trendChart', 'Tendencias_Mensuales.pdf')">
                                <i class="fas fa-download"></i>
                                Exportar PDF
                            </button>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>

                    <div class="quick-stats">
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="growthRate">0%</h4>
                                <p>Crecimiento Mensual</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--secondary) 0%, #34D399 100%);">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="avgTicket">$0</h4>
                                <p>Ticket Promedio</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <div class="quick-stat-icon" style="background: linear-gradient(135deg, var(--info) 0%, #60A5FA 100%);">
                                <i class="fas fa-repeat"></i>
                            </div>
                            <div class="quick-stat-content">
                                <h4 id="repeatRate">0%</h4>
                                <p>Tasa de Repetici√≥n</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Demo Footer -->
            <div class="demo-footer">
                <p>‚ú® <strong>SISTEMA DE VENTAS PRO - VERSI√ìN DEMO</strong> ‚ú®</p>
                <p>Esta es una demostraci√≥n completa con datos pre-cargados. Todos los cambios se guardan en tu navegador.</p>
                <p>
                    <button class="btn btn-secondary" onclick="resetDemoData()" style="margin: 0 5px;">
                        <i class="fas fa-redo"></i>
                        Reiniciar Demo
                    </button>
                    <button class="btn btn-primary" onclick="addDemoData()" style="margin: 0 5px;">
                        <i class="fas fa-plus"></i>
                        Agregar M√°s Datos
                    </button>
                </p>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Sale Modal -->
    <div class="modal" id="saleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ûï Nueva Venta Demo</h2>
                <button class="modal-close" onclick="closeModal('saleModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="saleForm">
                    <div class="form-group">
                        <label class="form-label">Cliente</label>
                        <select class="form-control" id="saleCustomer" required>
                            <option value="">Seleccionar cliente</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Producto</label>
                        <select class="form-control" id="saleProduct" required onchange="updateProductPrice()">
                            <option value="">Seleccionar producto</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Cantidad</label>
                            <input type="number" class="form-control" id="saleQuantity" min="1" value="1" required oninput="calculateSaleTotal()">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Precio Unitario</label>
                            <input type="number" class="form-control" id="salePrice" step="0.01" required oninput="calculateSaleTotal()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Total</label>
                        <input type="text" class="form-control" id="saleTotal" value="$0.00" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estado</label>
                        <select class="form-control" id="saleStatus" required>
                            <option value="Pendiente">Pendiente</option>
                            <option value="Completada">Completada</option>
                            <option value="Cancelada">Cancelada</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Fecha</label>
                        <input type="date" class="form-control" id="saleDate" required>
                    </div>
                    <div class="demo-instructions" style="margin: 20px 0; padding: 15px;">
                        <p><i class="fas fa-info-circle"></i> Esta es una venta de demostraci√≥n. Los datos se guardar√°n en tu navegador.</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('saleModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveSale()">Guardar Venta Demo</button>
            </div>
        </div>
    </div>

    <!-- Customer Modal -->
    <div class="modal" id="customerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ûï Nuevo Cliente Demo</h2>
                <button class="modal-close" onclick="closeModal('customerModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="customerName" placeholder="Ej: Carlos" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Apellido</label>
                            <input type="text" class="form-control" id="customerLastName" placeholder="Ej: Rodr√≠guez" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="customerEmail" placeholder="ejemplo@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tel√©fono</label>
                        <input type="tel" class="form-control" id="customerPhone" placeholder="+34 600 000 000" required>
                    </div>
                    <div class="demo-instructions" style="margin: 20px 0; padding: 15px;">
                        <p><i class="fas fa-info-circle"></i> Cliente de demostraci√≥n. Puedes crear tantos como quieras para probar el sistema.</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('customerModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveCustomer()">Guardar Cliente Demo</button>
            </div>
        </div>
    </div>

    <!-- Product Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ûï Nuevo Producto Demo</h2>
                <button class="modal-close" onclick="closeModal('productModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="productForm">
                    <div class="form-group">
                        <label class="form-label">Nombre del Producto</label>
                        <input type="text" class="form-control" id="productName" placeholder="Ej: Plan Avanzado" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categor√≠a</label>
                        <select class="form-control" id="productCategory" required>
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Suscripciones">Suscripciones</option>
                            <option value="Software">Software</option>
                            <option value="Consultor√≠a">Consultor√≠a</option>
                            <option value="Hardware">Hardware</option>
                            <option value="Servicios">Servicios</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Precio</label>
                            <input type="number" class="form-control" id="productPrice" placeholder="99.99" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Stock</label>
                            <input type="number" class="form-control" id="productStock" placeholder="100" required>
                        </div>
                    </div>
                    <div class="demo-instructions" style="margin: 20px 0; padding: 15px;">
                        <p><i class="fas fa-info-circle"></i> Producto de demostraci√≥n. Los cambios afectar√°n los reportes y gr√°ficos.</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('productModal')">Cancelar</button>
                        <button class="btn btn-primary" onclick="saveProduct()">Guardar Producto Demo</button>
            </div>
        </div>
    </div>

    <!-- Lead Modal -->
    <div class="modal" id="leadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ûï Nuevo Lead Demo</h2>
                <button class="modal-close" onclick="closeModal('leadModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="leadForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="leadName" placeholder="Ej: Ana" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Apellido</label>
                            <input type="text" class="form-control" id="leadLastName" placeholder="Ej: Mart√≠nez" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="leadEmail" placeholder="ana@empresa.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Empresa</label>
                        <input type="text" class="form-control" id="leadCompany" placeholder="Tech Solutions" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Valor Estimado</label>
                            <input type="number" class="form-control" id="leadValue" placeholder="5000" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fuente</label>
                            <select class="form-control" id="leadSource" required>
                                <option value="Web">Web</option>
                                <option value="Referido">Referido</option>
                                <option value="Redes Sociales">Redes Sociales</option>
                                <option value="Evento">Evento</option>
                            </select>
                        </div>
                    </div>
                    <div class="demo-instructions" style="margin: 20px 0; padding: 15px;">
                        <p><i class="fas fa-info-circle"></i> Lead de demostraci√≥n. Puedes convertirlo en cliente cuando est√© calificado.</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('leadModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveLead()">Guardar Lead Demo</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage">Operaci√≥n completada</span>
    </div>

    <!-- Hidden Modal Structure -->
    <div class="modal" style="display: none;">
        <div class="modal-content"></div>
    </div>

    <script>
        // ============================================
        // SISTEMA DE DEMOSTRACI√ìN COMPLETO
        // ============================================

        // Variables globales
        let salesChart, categoryChart, distributionChart, trendChart;
        let currentData = {
            sales: [],
            customers: [],
            products: [],
            leads: []
        };
        let currentEditId = null;

        // Datos DEMO pre-cargados
        const demoData = {
            sales: [
                {
                    id: 1,
                    customerId: 1,
                    productId: 1,
                    quantity: 1,
                    price: 2500,
                    total: 2500,
                    status: 'Completada',
                    date: '2024-01-15',
                    customerName: 'Mar√≠a Garc√≠a',
                    productName: 'Plan Premium'
                },
                {
                    id: 2,
                    customerId: 2,
                    productId: 2,
                    quantity: 2,
                    price: 500,
                    total: 1000,
                    status: 'Completada',
                    date: '2024-01-20',
                    customerName: 'Juan P√©rez',
                    productName: 'Plan B√°sico'
                },
                {
                    id: 3,
                    customerId: 3,
                    productId: 3,
                    quantity: 1,
                    price: 5000,
                    total: 5000,
                    status: 'Pendiente',
                    date: '2024-01-25',
                    customerName: 'Carlos L√≥pez',
                    productName: 'Plan Enterprise'
                }
            ],
            customers: [
                {
                    id: 1,
                    name: 'Mar√≠a',
                    lastName: 'Garc√≠a',
                    email: 'maria@empresa.com',
                    phone: '+34 600 111 222',
                    company: 'Marketing Pro',
                    address: 'Calle Mayor 123',
                    status: 'Activo',
                    totalPurchases: 2500,
                    lastPurchase: '2024-01-15'
                },
                {
                    id: 2,
                    name: 'Juan',
                    lastName: 'P√©rez',
                    email: 'juan@consultoria.com',
                    phone: '+34 600 333 444',
                    company: 'Consulting SL',
                    address: 'Avenida Central 456',
                    status: 'Activo',
                    totalPurchases: 1000,
                    lastPurchase: '2024-01-20'
                },
                {
                    id: 3,
                    name: 'Carlos',
                    lastName: 'L√≥pez',
                    email: 'carlos@tech.com',
                    phone: '+34 600 555 666',
                    company: 'Tech Solutions',
                    address: 'Plaza Innovaci√≥n 789',
                    status: 'Activo',
                    totalPurchases: 5000,
                    lastPurchase: '2024-01-25'
                }
            ],
            products: [
                {
                    id: 1,
                    name: 'Plan Premium',
                    category: 'Suscripciones',
                    price: 2500,
                    stock: 50,
                    description: 'Suscripci√≥n premium con todas las funciones',
                    status: 'Activo',
                    salesCount: 1
                },
                {
                    id: 2,
                    name: 'Plan B√°sico',
                    category: 'Suscripciones',
                    price: 500,
                    stock: 100,
                    description: 'Suscripci√≥n b√°sica para peque√±as empresas',
                    status: 'Activo',
                    salesCount: 2
                },
                {
                    id: 3,
                    name: 'Plan Enterprise',
                    category: 'Suscripciones',
                    price: 5000,
                    stock: 20,
                    description: 'Soluci√≥n empresarial completa',
                    status: 'Activo',
                    salesCount: 1
                },
                {
                    id: 4,
                    name: 'Software CRM',
                    category: 'Software',
                    price: 1500,
                    stock: 30,
                    description: 'Sistema de gesti√≥n de clientes',
                    status: 'Activo',
                    salesCount: 0
                },
                {
                    id: 5,
                    name: 'Consultor√≠a SEO',
                    category: 'Consultor√≠a',
                    price: 800,
                    stock: 999,
                    description: 'Optimizaci√≥n para buscadores',
                    status: 'Activo',
                    salesCount: 0
                }
            ],
            leads: [
                {
                    id: 1,
                    name: 'Ana',
                    lastName: 'Mart√≠nez',
                    email: 'ana@startup.com',
                    company: 'StartupXYZ',
                    phone: '+34 600 777 888',
                    value: 10000,
                    source: 'Web',
                    status: 'Nuevo',
                    notes: 'Interesada en Plan Enterprise',
                    date: '2024-01-10'
                },
                {
                    id: 2,
                    name: 'Pedro',
                    lastName: 'S√°nchez',
                    email: 'pedro@digital.com',
                    company: 'Digital Agency',
                    phone: '+34 600 999 000',
                    value: 5000,
                    source: 'Referido',
                    status: 'En Progreso',
                    notes: 'Seguimiento programado',
                    date: '2024-01-18'
                },
                {
                    id: 3,
                    name: 'Laura',
                    lastName: 'Rodr√≠guez',
                    email: 'laura@consulting.com',
                    company: 'Business Consulting',
                    phone: '+34 600 111 000',
                    value: 15000,
                    source: 'Evento',
                    status: 'Calificado',
                    notes: 'Listo para presentaci√≥n final',
                    date: '2024-01-22'
                }
            ]
        };

        // Inicializar la aplicaci√≥n DEMO
        document.addEventListener('DOMContentLoaded', function() {
            initDemoApp();
        });

        function initDemoApp() {
            // Cargar datos
            loadDemoData();
            
            // Configurar UI
            setupDemoUI();
            
            // Inicializar gr√°ficos
            setupDemoCharts();
            
            // Mostrar datos iniciales
            refreshDemoData();
            
            // Mostrar mensaje de bienvenida
            showNotification('‚ú® Sistema DEMO cargado correctamente. ¬°Explora todas las funciones!', 'info');
        }

        function loadDemoData() {
            const savedData = localStorage.getItem('ventasProDemoData');
            if (savedData) {
                currentData = JSON.parse(savedData);
            } else {
                currentData = JSON.parse(JSON.stringify(demoData));
                saveDemoData();
            }
        }

        function saveDemoData() {
            localStorage.setItem('ventasProDemoData', JSON.stringify(currentData));
        }

        function setupDemoUI() {
            // Navegaci√≥n
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.dataset.page) {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        navigateToDemo(this.dataset.page);
                    });
                }
            });

            // Men√∫ m√≥vil
            document.querySelector('.mobile-toggle').addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('active');
            });

            // Configurar fecha actual
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('saleDate').value = today;
        }

        function setupDemoCharts() {
            // Gr√°fico de ventas
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            salesChart = new Chart(salesCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Ventas ($)',
                        data: [2500, 3500, 2800, 4200, 3800, 4500],
                        borderColor: 'rgb(79, 70, 229)',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });

            // Gr√°fico de categor√≠as
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            categoryChart = new Chart(categoryCtx, {
                type: 'pie',
                data: {
                    labels: ['Suscripciones', 'Software', 'Consultor√≠a', 'Hardware'],
                    datasets: [{
                        data: [8500, 1500, 800, 0],
                        backgroundColor: [
                            'rgba(79, 70, 229, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });

            // Gr√°fico de distribuci√≥n
            const distributionCtx = document.getElementById('distributionChart').getContext('2d');
            distributionChart = new Chart(distributionCtx, {
                type: 'bar',
                data: {
                    labels: ['Plan Premium', 'Plan B√°sico', 'Plan Enterprise', 'Software CRM'],
                    datasets: [{
                        label: 'Ventas por Producto',
                        data: [2500, 1000, 5000, 0],
                        backgroundColor: [
                            'rgba(79, 70, 229, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(245, 158, 11, 0.7)'
                        ],
                        borderColor: [
                            'rgb(79, 70, 229)',
                            'rgb(16, 185, 129)',
                            'rgb(59, 130, 246)',
                            'rgb(245, 158, 11)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });

            // Gr√°fico de tendencias
            const trendCtx = document.getElementById('trendChart').getContext('2d');
            trendChart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['Sep', 'Oct', 'Nov', 'Dic', 'Ene', 'Feb'],
                    datasets: [
                        {
                            label: 'Ventas',
                            data: [2800, 3200, 2900, 4100, 3500, 4200],
                            borderColor: 'rgb(79, 70, 229)',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            borderWidth: 3,
                            fill: true
                        },
                        {
                            label: 'Clientes',
                            data: [4, 6, 5, 8, 7, 9],
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function navigateToDemo(page) {
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`.nav-link[data-page="${page}"]`).classList.add('active');
            
            // Mostrar p√°gina
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(page).classList.add('active');
            
            // Actualizar t√≠tulo
            const pageTitle = document.querySelector(`.nav-link[data-page="${page}"]`).textContent.trim();
            document.getElementById('pageTitle').textContent = pageTitle + ' - DEMO';
            
            // Actualizar datos de la p√°gina
            switch(page) {
                case 'dashboard':
                    updateDashboardStats();
                    loadRecentSales();
                    break;
                case 'sales':
                    loadSalesTable();
                    break;
                case 'customers':
                    loadCustomersTable();
                    break;
                case 'products':
                    loadProductsTable();
                    break;
                case 'leads':
                    loadLeadsTable();
                    break;
                case 'reports':
                    updateReportCharts();
                    break;
                case 'analytics':
                    updateAnalyticsCharts();
                    break;
            }
        }

        // ============================================
        // FUNCIONES DEMO PRINCIPALES
        // ============================================

        function refreshDemoData() {
            updateDashboardStats();
            updateBadges();
            loadRecentSales();
            loadSalesTable();
            loadCustomersTable();
            loadProductsTable();
            loadLeadsTable();
            updateSelectOptions();
        }

        function updateDashboardStats() {
            // Calcular estad√≠sticas
            const totalSales = currentData.sales.reduce((sum, sale) => sum + sale.total, 0);
            const totalCustomers = currentData.customers.length;
            const totalLeads = currentData.leads.length;
            const convertedLeads = currentData.leads.filter(lead => lead.status === 'Convertido').length;
            const conversionRate = totalLeads > 0 ? Math.round((convertedLeads / totalLeads) * 100) : 0;
            const productsSold = currentData.sales.reduce((sum, sale) => sum + sale.quantity, 0);
            
            // Ventas del mes actual
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthRevenue = currentData.sales
                .filter(sale => {
                    const saleDate = new Date(sale.date);
                    return saleDate.getMonth() === currentMonth && saleDate.getFullYear() === currentYear;
                })
                .reduce((sum, sale) => sum + sale.total, 0);
            
            // Nuevos clientes este mes
            const newCustomers = currentData.customers
                .filter(customer => {
                    const customerDate = new Date(customer.lastPurchase || '2024-01-01');
                    return customerDate.getMonth() === currentMonth && customerDate.getFullYear() === currentYear;
                })
                .length;

            // Actualizar UI
            document.getElementById('quickSales').textContent = currentData.sales.length;
            document.getElementById('quickCustomers').textContent = totalCustomers;
            document.getElementById('quickLeads').textContent = totalLeads;
            document.getElementById('quickRevenue').textContent = '$' + totalSales.toLocaleString('es-ES');
            
            document.getElementById('monthRevenue').textContent = monthRevenue.toLocaleString('es-ES', { minimumFractionDigits: 2 });
            document.getElementById('newCustomers').textContent = newCustomers;
            document.getElementById('conversionRate').textContent = conversionRate + '%';
            document.getElementById('productsSold').textContent = productsSold;
            
            // Actualizar m√©tricas de an√°lisis
            const growthRate = monthRevenue > 0 ? Math.round((monthRevenue / 3000) * 100) - 100 : 0;
            const avgTicket = currentData.sales.length > 0 ? Math.round(totalSales / currentData.sales.length) : 0;
            const repeatRate = totalCustomers > 0 ? Math.round((currentData.sales.length / totalCustomers) * 100) : 0;
            
            document.getElementById('growthRate').textContent = growthRate + '%';
            document.getElementById('avgTicket').textContent = '$' + avgTicket.toLocaleString('es-ES');
            document.getElementById('repeatRate').textContent = repeatRate + '%';
        }

        function updateBadges() {
            document.getElementById('salesBadge').textContent = currentData.sales.length;
            document.getElementById('customersBadge').textContent = currentData.customers.length;
            document.getElementById('productsBadge').textContent = currentData.products.length;
            document.getElementById('leadsBadge').textContent = currentData.leads.length;
        }

        function loadRecentSales() {
            const table = document.getElementById('recentSalesTable');
            const recentSales = currentData.sales.slice(0, 5);
            
            if (recentSales.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" class="empty-state">
                            <i class="fas fa-shopping-cart"></i>
                            <div>No hay ventas recientes</div>
                            <button class="btn btn-primary" onclick="addRandomSale()" style="margin-top: 10px;">
                                Crear Venta Demo
                            </button>
                        </td>
                    </tr>
                `;
                return;
            }
            
            table.innerHTML = recentSales.map(sale => `
                <tr>
                    <td>${sale.customerName}</td>
                    <td>${sale.productName}</td>
                    <td>$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</td>
                    <td><span class="status-badge ${getStatusClass(sale.status)}">${sale.status}</span></td>
                    <td>${formatDate(sale.date)}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editSale(${sale.id})" title="Ver detalles">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn-icon" onclick="deleteSale(${sale.id})" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function loadSalesTable() {
            const table = document.getElementById('salesTable');
            
            if (currentData.sales.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <i class="fas fa-shopping-cart"></i>
                            <div>No hay ventas registradas</div>
                            <button class="btn btn-primary" onclick="addDemoData()" style="margin-top: 10px;">
                                Cargar Datos Demo
                            </button>
                        </td>
                    </tr>
                `;
                return;
            }
            
            table.innerHTML = currentData.sales.map(sale => `
                <tr>
                    <td>#${sale.id.toString().padStart(3, '0')}</td>
                    <td>${sale.customerName}</td>
                    <td>${sale.productName}</td>
                    <td>$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</td>
                    <td><span class="status-badge ${getStatusClass(sale.status)}">${sale.status}</span></td>
                    <td>${formatDate(sale.date)}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editSale(${sale.id})" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon" onclick="deleteSale(${sale.id})" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </button>
                            <button class="btn-icon" onclick="generateReceipt(${sale.id})" title="Recibo">
                                <i class="fas fa-receipt"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function loadCustomersTable() {
            const table = document.getElementById('customersTable');
            
            if (currentData.customers.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <i class="fas fa-users"></i>
                            <div>No hay clientes registrados</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            table.innerHTML = currentData.customers.map(customer => `
                <tr>
                    <td>${customer.name} ${customer.lastName}</td>
                    <td>${customer.email}</td>
                    <td>${customer.phone}</td>
                    <td><span class="status-badge ${getStatusClass(customer.status)}">${customer.status}</span></td>
                    <td>$${customer.totalPurchases.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</td>
                    <td>${formatDate(customer.lastPurchase)}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editCustomer(${customer.id})" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon" onclick="deleteCustomer(${customer.id})" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function loadProductsTable() {
            const table = document.getElementById('productsTable');
            
            if (currentData.products.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <i class="fas fa-box"></i>
                            <div>No hay productos registrados</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            table.innerHTML = currentData.products.map(product => `
                <tr>
                    <td>${product.name}</td>
                    <td>${product.category}</td>
                    <td>$${product.price.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</td>
                    <td>${product.stock}</td>
                    <td><span class="status-badge ${getStatusClass(product.status)}">${product.status}</span></td>
                    <td>${product.salesCount || 0}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editProduct(${product.id})" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon" onclick="deleteProduct(${product.id})" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function loadLeadsTable() {
            const table = document.getElementById('leadsTable');
            
            if (currentData.leads.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <i class="fas fa-bullseye"></i>
                            <div>No hay leads registrados</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            table.innerHTML = currentData.leads.map(lead => `
                <tr>
                    <td>${lead.name} ${lead.lastName}</td>
                    <td>${lead.email}</td>
                    <td>${lead.company}</td>
                    <td><span class="status-badge ${getStatusClass(lead.status)}">${lead.status}</span></td>
                    <td>$${lead.value.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</td>
                    <td>${lead.source}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editLead(${lead.id})" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon" onclick="deleteLead(${lead.id})" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </button>
                            ${lead.status !== 'Convertido' ? `
                                <button class="btn-icon" onclick="convertLead(${lead.id})" title="Convertir">
                                    <i class="fas fa-user-plus"></i>
                                </button>
                            ` : ''}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function updateSelectOptions() {
            // Actualizar clientes
            const customerSelect = document.getElementById('saleCustomer');
            customerSelect.innerHTML = '<option value="">Seleccionar cliente</option>';
            currentData.customers.forEach(customer => {
                customerSelect.innerHTML += `<option value="${customer.id}">${customer.name} ${customer.lastName}</option>`;
            });

            // Actualizar productos
            const productSelect = document.getElementById('saleProduct');
            productSelect.innerHTML = '<option value="">Seleccionar producto</option>';
            currentData.products.forEach(product => {
                productSelect.innerHTML += `<option value="${product.id}" data-price="${product.price}">${product.name} - $${product.price.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</option>`;
            });
        }

        // ============================================
        // FUNCIONES CRUD DEMO
        // ============================================

        function openModal(modalId, editId = null) {
            currentEditId = editId;
            
            const modal = document.getElementById(modalId);
            modal.classList.add('active');
            
            // Configurar formulario seg√∫n modal
            if (modalId === 'saleModal') {
                if (editId) {
                    document.querySelector('#saleModal .modal-title').textContent = 'Editar Venta Demo';
                    const sale = currentData.sales.find(s => s.id === editId);
                    if (sale) {
                        document.getElementById('saleCustomer').value = sale.customerId;
                        document.getElementById('saleProduct').value = sale.productId;
                        document.getElementById('saleQuantity').value = sale.quantity;
                        document.getElementById('salePrice').value = sale.price;
                        document.getElementById('saleStatus').value = sale.status;
                        document.getElementById('saleDate').value = sale.date;
                        calculateSaleTotal();
                    }
                } else {
                    document.querySelector('#saleModal .modal-title').textContent = 'Nueva Venta Demo';
                    resetSaleForm();
                }
                updateSelectOptions();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            currentEditId = null;
        }

        function updateProductPrice() {
            const productSelect = document.getElementById('saleProduct');
            const selectedOption = productSelect.options[productSelect.selectedIndex];
            const price = selectedOption.getAttribute('data-price');
            
            if (price) {
                document.getElementById('salePrice').value = price;
                calculateSaleTotal();
            }
        }

        function calculateSaleTotal() {
            const quantity = parseInt(document.getElementById('saleQuantity').value) || 0;
            const price = parseFloat(document.getElementById('salePrice').value) || 0;
            const total = quantity * price;
            document.getElementById('saleTotal').value = `$${total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`;
        }

        function resetSaleForm() {
            document.getElementById('saleForm').reset();
            document.getElementById('saleDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('saleQuantity').value = 1;
            document.getElementById('saleTotal').value = '$0.00';
        }

        function saveSale() {
            const customerId = parseInt(document.getElementById('saleCustomer').value);
            const productId = parseInt(document.getElementById('saleProduct').value);
            const quantity = parseInt(document.getElementById('saleQuantity').value);
            const price = parseFloat(document.getElementById('salePrice').value);
            const status = document.getElementById('saleStatus').value;
            const date = document.getElementById('saleDate').value;
            const total = parseFloat(document.getElementById('saleTotal').value.replace('$', '').replace(',', ''));

            if (!customerId || !productId || !quantity || !price || !date) {
                showNotification('Por favor complete todos los campos', 'error');
                return;
            }

            const customer = currentData.customers.find(c => c.id === customerId);
            const product = currentData.products.find(p => p.id === productId);

            if (!customer || !product) {
                showNotification('Cliente o producto no encontrado', 'error');
                return;
            }

            const saleData = {
                id: currentEditId || generateId('sales'),
                customerId,
                productId,
                quantity,
                price,
                total,
                status,
                date,
                customerName: `${customer.name} ${customer.lastName}`,
                productName: product.name
            };

            if (currentEditId) {
                const index = currentData.sales.findIndex(s => s.id === currentEditId);
                if (index !== -1) {
                    currentData.sales[index] = saleData;
                }
            } else {
                currentData.sales.unshift(saleData);
                
                // Actualizar contador del producto
                const productIndex = currentData.products.findIndex(p => p.id === productId);
                if (productIndex !== -1) {
                    currentData.products[productIndex].salesCount = (currentData.products[productIndex].salesCount || 0) + 1;
                }

                // Actualizar cliente
                const customerIndex = currentData.customers.findIndex(c => c.id === customerId);
                if (customerIndex !== -1) {
                    currentData.customers[customerIndex].totalPurchases = (currentData.customers[customerIndex].totalPurchases || 0) + total;
                    currentData.customers[customerIndex].lastPurchase = date;
                }
            }

            saveDemoData();
            closeModal('saleModal');
            refreshDemoData();
            updateCharts();
            showNotification(`Venta ${currentEditId ? 'actualizada' : 'creada'} exitosamente`);
        }

        function saveCustomer() {
            const name = document.getElementById('customerName').value.trim();
            const lastName = document.getElementById('customerLastName').value.trim();
            const email = document.getElementById('customerEmail').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const company = document.getElementById('customerCompany') ? document.getElementById('customerCompany').value.trim() : 'Demo Company';
            const address = document.getElementById('customerAddress') ? document.getElementById('customerAddress').value.trim() : 'Direcci√≥n demo';

            if (!name || !lastName || !email || !phone) {
                showNotification('Por favor complete todos los campos', 'error');
                return;
            }

            const customerData = {
                id: currentEditId || generateId('customers'),
                name,
                lastName,
                email,
                phone,
                company,
                address,
                status: 'Activo',
                totalPurchases: 0,
                lastPurchase: null
            };

            if (currentEditId) {
                const index = currentData.customers.findIndex(c => c.id === currentEditId);
                if (index !== -1) {
                    customerData.totalPurchases = currentData.customers[index].totalPurchases;
                    customerData.lastPurchase = currentData.customers[index].lastPurchase;
                    currentData.customers[index] = customerData;
                }
            } else {
                currentData.customers.unshift(customerData);
            }

            saveDemoData();
            closeModal('customerModal');
            refreshDemoData();
            showNotification(`Cliente ${currentEditId ? 'actualizado' : 'creado'} exitosamente`);
        }

        function saveProduct() {
            const name = document.getElementById('productName').value.trim();
            const category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const stock = parseInt(document.getElementById('productStock').value);

            if (!name || !category || !price || !stock) {
                showNotification('Por favor complete todos los campos', 'error');
                return;
            }

            const productData = {
                id: currentEditId || generateId('products'),
                name,
                category,
                price,
                stock,
                description: 'Producto de demostraci√≥n',
                status: 'Activo',
                salesCount: 0
            };

            if (currentEditId) {
                const index = currentData.products.findIndex(p => p.id === currentEditId);
                if (index !== -1) {
                    productData.salesCount = currentData.products[index].salesCount || 0;
                    currentData.products[index] = productData;
                }
            } else {
                currentData.products.unshift(productData);
            }

            saveDemoData();
            closeModal('productModal');
            refreshDemoData();
            showNotification(`Producto ${currentEditId ? 'actualizado' : 'creado'} exitosamente`);
        }

        function saveLead() {
            const name = document.getElementById('leadName').value.trim();
            const lastName = document.getElementById('leadLastName').value.trim();
            const email = document.getElementById('leadEmail').value.trim();
            const company = document.getElementById('leadCompany').value.trim();
            const phone = document.getElementById('leadPhone').value.trim();
            const value = parseFloat(document.getElementById('leadValue').value);
            const source = document.getElementById('leadSource').value;

            if (!name || !lastName || !email || !company || !value) {
                showNotification('Por favor complete todos los campos', 'error');
                return;
            }

            const leadData = {
                id: currentEditId || generateId('leads'),
                name,
                lastName,
                email,
                company,
                phone,
                value,
                source,
                status: 'Nuevo',
                notes: 'Lead de demostraci√≥n',
                date: new Date().toISOString().split('T')[0]
            };

            if (currentEditId) {
                const index = currentData.leads.findIndex(l => l.id === currentEditId);
                if (index !== -1) {
                    currentData.leads[index] = leadData;
                }
            } else {
                currentData.leads.unshift(leadData);
            }

            saveDemoData();
            closeModal('leadModal');
            refreshDemoData();
            showNotification(`Lead ${currentEditId ? 'actualizado' : 'creado'} exitosamente`);
        }

        function editSale(id) {
            openModal('saleModal', id);
        }

        function editCustomer(id) {
            const customer = currentData.customers.find(c => c.id === id);
            if (customer) {
                document.getElementById('customerName').value = customer.name;
                document.getElementById('customerLastName').value = customer.lastName;
                document.getElementById('customerEmail').value = customer.email;
                document.getElementById('customerPhone').value = customer.phone;
                document.querySelector('#customerModal .modal-title').textContent = 'Editar Cliente Demo';
                currentEditId = id;
                openModal('customerModal');
            }
        }

        function editProduct(id) {
            const product = currentData.products.find(p => p.id === id);
            if (product) {
                document.getElementById('productName').value = product.name;
                document.getElementById('productCategory').value = product.category;
                document.getElementById('productPrice').value = product.price;
                document.getElementById('productStock').value = product.stock;
                document.querySelector('#productModal .modal-title').textContent = 'Editar Producto Demo';
                currentEditId = id;
                openModal('productModal');
            }
        }

        function editLead(id) {
            const lead = currentData.leads.find(l => l.id === id);
            if (lead) {
                document.getElementById('leadName').value = lead.name;
                document.getElementById('leadLastName').value = lead.lastName;
                document.getElementById('leadEmail').value = lead.email;
                document.getElementById('leadCompany').value = lead.company;
                document.getElementById('leadPhone').value = lead.phone || '';
                document.getElementById('leadValue').value = lead.value;
                document.getElementById('leadSource').value = lead.source;
                document.querySelector('#leadModal .modal-title').textContent = 'Editar Lead Demo';
                currentEditId = id;
                openModal('leadModal');
            }
        }

        function deleteSale(id) {
            if (confirm('¬øEliminar esta venta de demostraci√≥n?')) {
                currentData.sales = currentData.sales.filter(sale => sale.id !== id);
                saveDemoData();
                refreshDemoData();
                updateCharts();
                showNotification('Venta eliminada');
            }
        }

        function deleteCustomer(id) {
            if (confirm('¬øEliminar este cliente de demostraci√≥n?')) {
                currentData.customers = currentData.customers.filter(customer => customer.id !== id);
                saveDemoData();
                refreshDemoData();
                updateCharts();
                showNotification('Cliente eliminado');
            }
        }

        function deleteProduct(id) {
            if (confirm('¬øEliminar este producto de demostraci√≥n?')) {
                currentData.products = currentData.products.filter(product => product.id !== id);
                saveDemoData();
                refreshDemoData();
                updateCharts();
                showNotification('Producto eliminado');
            }
        }

        function deleteLead(id) {
            if (confirm('¬øEliminar este lead de demostraci√≥n?')) {
                currentData.leads = currentData.leads.filter(lead => lead.id !== id);
                saveDemoData();
                refreshDemoData();
                updateCharts();
                showNotification('Lead eliminado');
            }
        }

        function convertLead(id) {
            const lead = currentData.leads.find(l => l.id === id);
            if (!lead) return;

            if (confirm('¬øConvertir este lead en cliente?')) {
                const newCustomer = {
                    id: generateId('customers'),
                    name: lead.name,
                    lastName: lead.lastName,
                    email: lead.email,
                    phone: lead.phone || 'Sin tel√©fono',
                    company: lead.company,
                    address: 'Direcci√≥n de demostraci√≥n',
                    status: 'Activo',
                    totalPurchases: 0,
                    lastPurchase: null
                };

                lead.status = 'Convertido';
                currentData.customers.unshift(newCustomer);

                saveDemoData();
                refreshDemoData();
                showNotification('Lead convertido a cliente exitosamente');
            }
        }

        // ============================================
        // FUNCIONES DEMO ESPECIALES
        // ============================================

        function addDemoData() {
            // Agregar datos aleatorios para demostraci√≥n
            const randomNames = ['Ana', 'Luis', 'Sof√≠a', 'Diego', 'Elena', 'Miguel', 'Carmen', 'Javier'];
            const randomLastNames = ['G√≥mez', 'Fern√°ndez', 'Mart√≠nez', 'L√≥pez', 'Garc√≠a', 'Rodr√≠guez', 'S√°nchez', 'P√©rez'];
            const randomCompanies = ['Tech Corp', 'Digital Solutions', 'Innovation Labs', 'Business Pro', 'Next Gen', 'Future Tech'];
            
            // Agregar cliente aleatorio
            const randomCustomer = {
                id: generateId('customers'),
                name: randomNames[Math.floor(Math.random() * randomNames.length)],
                lastName: randomLastNames[Math.floor(Math.random() * randomLastNames.length)],
                email: `demo${Date.now()}@email.com`,
                phone: `+34 600 ${Math.floor(100000 + Math.random() * 900000)}`,
                company: randomCompanies[Math.floor(Math.random() * randomCompanies.length)],
                address: 'Calle Demo ' + Math.floor(Math.random() * 100),
                status: 'Activo',
                totalPurchases: 0,
                lastPurchase: null
            };
            currentData.customers.push(randomCustomer);
            
            // Agregar venta aleatoria
            if (currentData.products.length > 0 && currentData.customers.length > 0) {
                const randomProduct = currentData.products[Math.floor(Math.random() * currentData.products.length)];
                const randomCustomerForSale = currentData.customers[Math.floor(Math.random() * currentData.customers.length)];
                
                const randomSale = {
                    id: generateId('sales'),
                    customerId: randomCustomerForSale.id,
                    productId: randomProduct.id,
                    quantity: Math.floor(Math.random() * 3) + 1,
                    price: randomProduct.price,
                    total: randomProduct.price * (Math.floor(Math.random() * 3) + 1),
                    status: Math.random() > 0.3 ? 'Completada' : 'Pendiente',
                    date: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    customerName: `${randomCustomerForSale.name} ${randomCustomerForSale.lastName}`,
                    productName: randomProduct.name
                };
                currentData.sales.push(randomSale);
                
                // Actualizar cliente
                const customerIndex = currentData.customers.findIndex(c => c.id === randomCustomerForSale.id);
                if (customerIndex !== -1) {
                    currentData.customers[customerIndex].totalPurchases += randomSale.total;
                    currentData.customers[customerIndex].lastPurchase = randomSale.date;
                }
                
                // Actualizar producto
                const productIndex = currentData.products.findIndex(p => p.id === randomProduct.id);
                if (productIndex !== -1) {
                    currentData.products[productIndex].salesCount = (currentData.products[productIndex].salesCount || 0) + 1;
                }
            }
            
            // Agregar lead aleatorio
            const randomLead = {
                id: generateId('leads'),
                name: randomNames[Math.floor(Math.random() * randomNames.length)],
                lastName: randomLastNames[Math.floor(Math.random() * randomLastNames.length)],
                email: `lead${Date.now()}@empresa.com`,
                company: randomCompanies[Math.floor(Math.random() * randomCompanies.length)],
                phone: `+34 600 ${Math.floor(100000 + Math.random() * 900000)}`,
                value: Math.floor(Math.random() * 10000) + 1000,
                source: ['Web', 'Referido', 'Redes Sociales', 'Evento'][Math.floor(Math.random() * 4)],
                status: ['Nuevo', 'En Progreso', 'Calificado'][Math.floor(Math.random() * 3)],
                notes: 'Lead generado autom√°ticamente para demostraci√≥n',
                date: new Date().toISOString().split('T')[0]
            };
            currentData.leads.push(randomLead);
            
            saveDemoData();
            refreshDemoData();
            updateCharts();
            showNotification('Datos de demostraci√≥n agregados exitosamente', 'info');
        }

        function addRandomSale() {
            if (currentData.products.length === 0 || currentData.customers.length === 0) {
                showNotification('Primero agrega productos y clientes', 'error');
                return;
            }
            
            const randomProduct = currentData.products[Math.floor(Math.random() * currentData.products.length)];
            const randomCustomer = currentData.customers[Math.floor(Math.random() * currentData.customers.length)];
            
            const saleData = {
                id: generateId('sales'),
                customerId: randomCustomer.id,
                productId: randomProduct.id,
                quantity: Math.floor(Math.random() * 3) + 1,
                price: randomProduct.price,
                total: randomProduct.price * (Math.floor(Math.random() * 3) + 1),
                status: Math.random() > 0.3 ? 'Completada' : 'Pendiente',
                date: new Date().toISOString().split('T')[0],
                customerName: `${randomCustomer.name} ${randomCustomer.lastName}`,
                productName: randomProduct.name
            };
            
            currentData.sales.unshift(saleData);
            
            // Actualizar cliente
            const customerIndex = currentData.customers.findIndex(c => c.id === randomCustomer.id);
            if (customerIndex !== -1) {
                currentData.customers[customerIndex].totalPurchases += saleData.total;
                currentData.customers[customerIndex].lastPurchase = saleData.date;
            }
            
            // Actualizar producto
            const productIndex = currentData.products.findIndex(p => p.id === randomProduct.id);
            if (productIndex !== -1) {
                currentData.products[productIndex].salesCount = (currentData.products[productIndex].salesCount || 0) + 1;
            }
            
            saveDemoData();
            refreshDemoData();
            updateCharts();
            showNotification('Venta de demostraci√≥n creada exitosamente');
        }

        function convertRandomLead() {
            if (currentData.leads.length === 0) {
                showNotification('No hay leads para convertir', 'error');
                return;
            }
            
            const randomLead = currentData.leads.find(lead => lead.status !== 'Convertido');
            if (!randomLead) {
                showNotification('Todos los leads ya est√°n convertidos', 'info');
                return;
            }
            
            const newCustomer = {
                id: generateId('customers'),
                name: randomLead.name,
                lastName: randomLead.lastName,
                email: randomLead.email,
                phone: randomLead.phone || 'Sin tel√©fono',
                company: randomLead.company,
                address: 'Direcci√≥n de demostraci√≥n',
                status: 'Activo',
                totalPurchases: 0,
                lastPurchase: null
            };
            
            randomLead.status = 'Convertido';
            currentData.customers.unshift(newCustomer);
            
            saveDemoData();
            refreshDemoData();
            showNotification('Lead convertido a cliente exitosamente');
        }

        function resetDemoData() {
            if (confirm('¬øRestablecer todos los datos de demostraci√≥n a los valores iniciales?')) {
                currentData = JSON.parse(JSON.stringify(demoData));
                saveDemoData();
                refreshDemoData();
                updateCharts();
                showNotification('Datos de demostraci√≥n restablecidos', 'info');
            }
        }

        // ============================================
        // FUNCIONES DE EXPORTACI√ìN PDF (DEMO)
        // ============================================

        function exportTable(type, filename) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // T√≠tulo
            doc.setFontSize(20);
            doc.text(`Reporte de ${type.charAt(0).toUpperCase() + type.slice(1)} - DEMO`, 105, 22, { align: 'center' });
            doc.setFontSize(11);
            doc.text(`Sistema de Ventas Pro - Versi√≥n Demostraci√≥n`, 105, 30, { align: 'center' });
            doc.text(`Generado el: ${new Date().toLocaleDateString('es-ES')}`, 105, 38, { align: 'center' });
            
            // Obtener datos
            let data = [];
            let headers = [];
            
            switch(type) {
                case 'sales':
                    headers = [['ID', 'Cliente', 'Producto', 'Monto', 'Estado', 'Fecha']];
                    data = currentData.sales.map(sale => [
                        `#${sale.id.toString().padStart(3, '0')}`,
                        sale.customerName,
                        sale.productName,
                        `$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                        sale.status,
                        formatDate(sale.date)
                    ]);
                    break;
                case 'customers':
                    headers = [['Nombre', 'Email', 'Tel√©fono', 'Estado', 'Total Compras', '√öltima Compra']];
                    data = currentData.customers.map(customer => [
                        `${customer.name} ${customer.lastName}`,
                        customer.email,
                        customer.phone,
                        customer.status,
                        `$${customer.totalPurchases.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                        formatDate(customer.lastPurchase)
                    ]);
                    break;
                case 'products':
                    headers = [['Producto', 'Categor√≠a', 'Precio', 'Stock', 'Estado', 'Ventas']];
                    data = currentData.products.map(product => [
                        product.name,
                        product.category,
                        `$${product.price.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                        product.stock,
                        product.status,
                        product.salesCount || 0
                    ]);
                    break;
                case 'leads':
                    headers = [['Nombre', 'Email', 'Empresa', 'Estado', 'Valor', 'Fuente']];
                    data = currentData.leads.map(lead => [
                        `${lead.name} ${lead.lastName}`,
                        lead.email,
                        lead.company,
                        lead.status,
                        `$${lead.value.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                        lead.source
                    ]);
                    break;
            }
            
            // Crear tabla
            doc.autoTable({
                head: headers,
                body: data,
                startY: 45,
                theme: 'striped',
                headStyles: { fillColor: [79, 70, 229] },
                margin: { top: 45 }
            });
            
            // Estad√≠sticas
            const finalY = doc.lastAutoTable.finalY || 45;
            doc.setFontSize(12);
            doc.text(`Total registros: ${data.length}`, 14, finalY + 20);
            doc.text(`Sistema de Demostraci√≥n - Datos pre-cargados`, 14, finalY + 30);
            
            // Guardar PDF
            doc.save(filename);
            showNotification(`PDF generado: ${filename}`);
        }

        function exportChart(chartId, filename) {
            const chartCanvas = document.getElementById(chartId);
            const chartImage = chartCanvas.toDataURL('image/png');
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // T√≠tulo
            doc.setFontSize(20);
            const title = getChartTitle(chartId);
            doc.text(title, 105, 22, { align: 'center' });
            doc.setFontSize(11);
            doc.text(`Sistema de Ventas Pro - Versi√≥n Demostraci√≥n`, 105, 30, { align: 'center' });
            doc.text(`Generado el: ${new Date().toLocaleDateString('es-ES')}`, 105, 38, { align: 'center' });
            
            // A√±adir imagen del gr√°fico
            doc.addImage(chartImage, 'PNG', 14, 45, 180, 100);
            
            // Informaci√≥n del demo
            doc.setFontSize(12);
            doc.text('Informaci√≥n del Reporte:', 14, 160);
            doc.setFontSize(10);
            
            const info = [
                'Este es un reporte de demostraci√≥n',
                'Los datos son pre-cargados para pruebas',
                'Puedes agregar m√°s datos usando el sistema',
                'Todos los cambios se guardan en tu navegador'
            ];
            
            info.forEach((line, index) => {
                doc.text(`‚Ä¢ ${line}`, 14, 170 + (index * 7));
            });
            
            doc.save(filename);
            showNotification(`Gr√°fico exportado: ${filename}`);
        }

        function generateSalesReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Portada
            doc.setFontSize(24);
            doc.text('REPORTE DE VENTAS COMPLETO', 105, 50, { align: 'center' });
            doc.setFontSize(16);
            doc.text('Sistema de Ventas Pro - Versi√≥n Demostraci√≥n', 105, 70, { align: 'center' });
            doc.setFontSize(12);
            doc.text(`Generado el: ${new Date().toLocaleDateString('es-ES')}`, 105, 85, { align: 'center' });
            doc.text('www.ventaspro.demo.com', 105, 95, { align: 'center' });
            
            // Resumen ejecutivo
            doc.addPage();
            doc.setFontSize(18);
            doc.text('Resumen Ejecutivo', 14, 22);
            doc.setFontSize(11);
            
            const totalSales = currentData.sales.reduce((sum, sale) => sum + sale.total, 0);
            const totalCustomers = currentData.customers.length;
            const avgTicket = currentData.sales.length > 0 ? totalSales / currentData.sales.length : 0;
            
            const summary = [
                `Ventas Totales: $${totalSales.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                `Cantidad de Ventas: ${currentData.sales.length}`,
                `Clientes Registrados: ${totalCustomers}`,
                `Ticket Promedio: $${avgTicket.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                `Productos en Cat√°logo: ${currentData.products.length}`,
                `Leads en Proceso: ${currentData.leads.length}`
            ];
            
            summary.forEach((line, index) => {
                doc.text(line, 14, 40 + (index * 10));
            });
            
            // Gr√°fico de ventas
            doc.addPage();
            doc.setFontSize(18);
            doc.text('An√°lisis de Ventas', 14, 22);
            
            const salesChartImage = document.getElementById('salesChart').toDataURL('image/png');
            doc.addImage(salesChartImage, 'PNG', 14, 30, 180, 80);
            
            // Tabla de ventas recientes
            const salesData = currentData.sales.slice(0, 10).map(sale => [
                `#${sale.id.toString().padStart(3, '0')}`,
                sale.customerName,
                sale.productName,
                `$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`,
                sale.status,
                formatDate(sale.date)
            ]);
            
            doc.autoTable({
                head: [['ID', 'Cliente', 'Producto', 'Monto', 'Estado', 'Fecha']],
                body: salesData,
                startY: 120,
                theme: 'striped',
                headStyles: { fillColor: [79, 70, 229] }
            });
            
            // Recomendaciones
            const finalY = doc.lastAutoTable.finalY || 120;
            doc.addPage();
            doc.setFontSize(18);
            doc.text('Recomendaciones', 14, 22);
            doc.setFontSize(11);
            
            const recommendations = [
                '1. Continuar con la estrategia actual de ventas',
                '2. Aumentar esfuerzos en conversi√≥n de leads',
                '3. Expandir cat√°logo de productos',
                '4. Mejorar seguimiento de clientes',
                '5. Implementar programas de fidelizaci√≥n'
            ];
            
            recommendations.forEach((rec, index) => {
                doc.text(rec, 14, 40 + (index * 15));
            });
            
            doc.save('Reporte_Ventas_Completo_DEMO.pdf');
            showNotification('Reporte completo generado exitosamente');
        }

        function generateReceipt(saleId) {
            const sale = currentData.sales.find(s => s.id === saleId);
            if (!sale) {
                showNotification('Venta no encontrada', 'error');
                return;
            }

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Encabezado
            doc.setFontSize(24);
            doc.text('RECIBO DE VENTA', 105, 22, { align: 'center' });
            doc.setFontSize(12);
            doc.text('Sistema de Ventas Pro - Versi√≥n Demostraci√≥n', 105, 32, { align: 'center' });
            doc.text('www.ventaspro.demo.com', 105, 40, { align: 'center' });
            
            // Informaci√≥n
            doc.setFontSize(10);
            doc.text(`Recibo #: ${sale.id.toString().padStart(6, '0')}`, 14, 60);
            doc.text(`Fecha: ${formatDate(sale.date)}`, 14, 67);
            doc.text(`Estado: ${sale.status}`, 14, 74);
            doc.text(`Cliente: ${sale.customerName}`, 14, 81);
            
            // Detalles
            const tableData = [
                ['Producto', 'Cantidad', 'Precio Unitario', 'Total'],
                [sale.productName, sale.quantity.toString(), `$${sale.price.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`, `$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`]
            ];
            
            doc.autoTable({
                body: tableData,
                startY: 90,
                theme: 'plain',
                styles: { fontSize: 10 }
            });
            
            // Total
            const finalY = doc.lastAutoTable.finalY || 90;
            doc.setFontSize(14);
            doc.text('Total:', 150, finalY + 15);
            doc.text(`$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}`, 170, finalY + 15, { align: 'right' });
            
            // Nota
            doc.setFontSize(9);
            doc.text('Este es un recibo de demostraci√≥n', 105, finalY + 40, { align: 'center' });
            doc.text('Sistema de Ventas Pro - Versi√≥n DEMO', 105, finalY + 47, { align: 'center' });
            
            doc.save(`Recibo_${sale.id.toString().padStart(6, '0')}_DEMO.pdf`);
            showNotification('Recibo de demostraci√≥n generado');
        }

        function generateDemoReceipt() {
            if (currentData.sales.length === 0) {
                showNotification('No hay ventas para generar recibo', 'error');
                return;
            }
            
            const randomSale = currentData.sales[Math.floor(Math.random() * currentData.sales.length)];
            generateReceipt(randomSale.id);
        }

        // ============================================
        // FUNCIONES UTILITARIAS DEMO
        // ============================================

        function generateId(type) {
            const items = currentData[type];
            if (items.length === 0) return 1;
            return Math.max(...items.map(item => item.id)) + 1;
        }

        function getStatusClass(status) {
            switch(status) {
                case 'Completada':
                case 'Activo':
                case 'Convertido':
                    return 'status-success';
                case 'Pendiente':
                case 'En Progreso':
                    return 'status-warning';
                case 'Cancelada':
                case 'Inactivo':
                    return 'status-danger';
                case 'Nuevo':
                case 'Calificado':
                    return 'status-info';
                default:
                    return 'status-info';
            }
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES');
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const messageElement = document.getElementById('notificationMessage');
            const icon = notification.querySelector('i');
            
            messageElement.textContent = message;
            
            // Configurar seg√∫n tipo
            if (type === 'error') {
                notification.className = 'notification error';
                icon.className = 'fas fa-exclamation-circle';
                icon.style.color = 'var(--danger)';
            } else if (type === 'info') {
                notification.className = 'notification info';
                icon.className = 'fas fa-info-circle';
                icon.style.color = 'var(--primary)';
            } else {
                notification.className = 'notification success';
                icon.className = 'fas fa-check-circle';
                icon.style.color = 'var(--secondary)';
            }
            
            notification.classList.add('active');
            
            setTimeout(() => {
                notification.classList.remove('active');
            }, 3000);
        }

        function updateCharts() {
            // Actualizar datos de gr√°ficos seg√∫n datos actuales
            const salesByMonth = [0, 0, 0, 0, 0, 0];
            currentData.sales.forEach(sale => {
                const month = new Date(sale.date).getMonth();
                if (month >= 0 && month < 6) {
                    salesByMonth[month] += sale.total;
                }
            });
            
            salesChart.data.datasets[0].data = salesByMonth;
            salesChart.update();
            
            // Actualizar gr√°fico de categor√≠as
            updateReportCharts();
            
            // Actualizar gr√°fico de an√°lisis
            updateAnalyticsCharts();
        }

        function updateReportCharts() {
            // Calcular ventas por categor√≠a
            const categories = {};
            currentData.sales.forEach(sale => {
                const product = currentData.products.find(p => p.id === sale.productId);
                if (product) {
                    if (!categories[product.category]) {
                        categories[product.category] = 0;
                    }
                    categories[product.category] += sale.total;
                }
            });
            
            const categoryLabels = Object.keys(categories);
            const categoryData = Object.values(categories);
            
            categoryChart.data.labels = categoryLabels;
            categoryChart.data.datasets[0].data = categoryData;
            categoryChart.update();
            
            // Actualizar gr√°fico de distribuci√≥n
            const products = {};
            currentData.sales.forEach(sale => {
                const product = currentData.products.find(p => p.id === sale.productId);
                if (product) {
                    if (!products[product.name]) {
                        products[product.name] = 0;
                    }
                    products[product.name] += sale.total;
                }
            });
            
            const productNames = Object.keys(products).slice(0, 4);
            const productData = productNames.map(name => products[name]);
            
            distributionChart.data.labels = productNames;
            distributionChart.data.datasets[0].data = productData;
            distributionChart.update();
        }

        function updateAnalyticsCharts() {
            // Actualizar datos de tendencia
            const months = ['Sep', 'Oct', 'Nov', 'Dic', 'Ene', 'Feb'];
            const salesData = [0, 0, 0, 0, 0, 0];
            const customersData = [0, 0, 0, 0, 0, 0];
            
            currentData.sales.forEach(sale => {
                const date = new Date(sale.date);
                const monthIndex = date.getMonth();
                if (monthIndex >= 8 && monthIndex <= 1) { // Sep a Feb
                    const adjustedIndex = monthIndex >= 8 ? monthIndex - 8 : monthIndex + 4;
                    salesData[adjustedIndex] += sale.total;
                }
            });
            
            currentData.customers.forEach(customer => {
                if (customer.lastPurchase) {
                    const date = new Date(customer.lastPurchase);
                    const monthIndex = date.getMonth();
                    if (monthIndex >= 8 && monthIndex <= 1) {
                        const adjustedIndex = monthIndex >= 8 ? monthIndex - 8 : monthIndex + 4;
                        customersData[adjustedIndex] += 1;
                    }
                }
            });
            
            trendChart.data.datasets[0].data = salesData;
            trendChart.data.datasets[1].data = customersData;
            trendChart.update();
        }

        function updateAllCharts() {
            updateCharts();
            showNotification('Todos los gr√°ficos actualizados');
        }

        function exportAllCharts() {
            exportChart('salesChart', 'Grafico_Ventas.pdf');
            setTimeout(() => exportChart('categoryChart', 'Grafico_Categorias.pdf'), 500);
            setTimeout(() => exportChart('distributionChart', 'Grafico_Distribucion.pdf'), 1000);
            setTimeout(() => exportChart('trendChart', 'Grafico_Tendencias.pdf'), 1500);
            showNotification('Exportando todos los gr√°ficos...', 'info');
        }

        function testAllExports() {
            exportTable('sales', 'Test_Ventas.pdf');
            setTimeout(() => exportTable('customers', 'Test_Clientes.pdf'), 500);
            setTimeout(() => exportTable('products', 'Test_Productos.pdf'), 1000);
            setTimeout(() => exportTable('leads', 'Test_Leads.pdf'), 1500);
            showNotification('Probando todas las exportaciones...', 'info');
        }

        function testAllFeatures() {
            // Probar varias funciones del demo
            addRandomSale();
            setTimeout(() => convertRandomLead(), 1000);
            setTimeout(() => generateDemoReceipt(), 2000);
            setTimeout(() => updateAllCharts(), 3000);
            showNotification('Probando todas las funciones del demo...', 'info');
        }

        function filterSales(status) {
            const table = document.getElementById('salesTable');
            const filteredSales = status ? 
                currentData.sales.filter(sale => sale.status === status) : 
                currentData.sales;
            
            if (filteredSales.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <i class="fas fa-filter"></i>
                            <div>No hay ventas con estado: ${status}</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            table.innerHTML = filteredSales.map(sale => `
                <tr>
                    <td>#${sale.id.toString().padStart(3, '0')}</td>
                    <td>${sale.customerName}</td>
                    <td>${sale.productName}</td>
                    <td>$${sale.total.toLocaleString('es-ES', { minimumFractionDigits: 2 })}</td>
                    <td><span class="status-badge ${getStatusClass(sale.status)}">${sale.status}</span></td>
                    <td>${formatDate(sale.date)}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editSale(${sale.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon" onclick="deleteSale(${sale.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            showNotification(`Filtrado: ${status} (${filteredSales.length} ventas)`);
        }

        function getChartTitle(chartId) {
            switch(chartId) {
                case 'salesChart': return 'Ventas Mensuales - DEMO';
                case 'categoryChart': return 'Ventas por Categor√≠a - DEMO';
                case 'distributionChart': return 'Distribuci√≥n de Ventas - DEMO';
                case 'trendChart': return 'Tendencias Mensuales - DEMO';
                default: return 'Gr√°fico de Demostraci√≥n';
            }
        }

        function exportAllData() {
            const dataStr = JSON.stringify(currentData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `ventas_pro_demo_backup_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Base de datos DEMO exportada exitosamente');
        }

        function showDemoInstructions() {
            showNotification('üí° Explora todas las p√°ginas usando el men√∫ lateral. Puedes agregar, editar, eliminar datos y exportar PDFs.', 'info');
        }

        // ============================================
        // ASIGNAR FUNCIONES AL SCOPE GLOBAL
        // ============================================

        window.openModal = openModal;
        window.closeModal = closeModal;
        window.saveSale = saveSale;
        window.saveCustomer = saveCustomer;
        window.saveProduct = saveProduct;
        window.saveLead = saveLead;
        window.editSale = editSale;
        window.editCustomer = editCustomer;
        window.editProduct = editProduct;
        window.editLead = editLead;
        window.deleteSale = deleteSale;
        window.deleteCustomer = deleteCustomer;
        window.deleteProduct = deleteProduct;
        window.deleteLead = deleteLead;
        window.convertLead = convertLead;
        window.addDemoData = addDemoData;
        window.addRandomSale = addRandomSale;
        window.convertRandomLead = convertRandomLead;
        window.resetDemoData = resetDemoData;
        window.exportTable = exportTable;
        window.exportChart = exportChart;
        window.generateSalesReport = generateSalesReport;
        window.generateReceipt = generateReceipt;
        window.generateDemoReceipt = generateDemoReceipt;
        window.filterSales = filterSales;
        window.updateAllCharts = updateAllCharts;
        window.exportAllCharts = exportAllCharts;
        window.testAllExports = testAllExports;
        window.testAllFeatures = testAllFeatures;
        window.exportAllData = exportAllData;
        window.showDemoInstructions = showDemoInstructions;
    </script>
</body>
</html>